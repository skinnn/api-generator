<style>
	.users {
		padding: 15px;
	}

	table {
		display: block;
		overflow-x: auto;
		width: 100%;
 	}

	table td,
	table th {
		font-size: 14px;
		vertical-align: middle !important;
	}

	.table .thead-dark th {
		min-width: 120px;
		padding: 5px 15px;
	}

	.users .edit-user-btn {
		padding: 5px 10px;
		border: none;
		border-radius: 5px;
	}

	.created,
	.updated {
		font-size: 12px;
	}
</style>

<div class="users">
	{{!-- <ul id="userList"></ul> --}}

	<div class="table-sm table-hover table-striped">
		<table class="table">
			<thead class="thead-dark">
				<tr>
					<th scope="col">#</th>
					<th scope="col">Roles</th>
					<th scope="col">Full name</th>
					<th scope="col">Username</th>
					<th scope="col">Email</th>
					<th scope="col">Created</th>
					<th scope="col">Updated</th>
					<th scope="col"></th>
				</tr>
			</thead>
			<tbody id="tableBody"></tbody>
		</table>
	</div>
</div>

<script>
	async function getUsers() {
		const users = await fetch('/api/user')
		.then(res => res.json())
		.then(res => {
			// users.map(user => `<li>${user.name}</li>`)
			console.log(res)
			return res
		})

		const mappedUsers = users.map(user => {
				return `
					<tr>
						<th>${user._id}</th>
						<td>${user.roles}</td>
						<td>${user.firstName ? user.firstName + ' ' + user.lastName : ''}</td>
						<td>${user.username}</td>
						<td>${user.email}</td>
						<td class="created">${user.created}</td>
						<td class="updated">${user.updated}</td>

						<td><button type="button" class="edit-user-btn btn btn-info" data-id="${user._id}" onclick="editUser()">Edit</button></td>
					</tr>
				`
		}).join('')
		document.getElementById('tableBody').innerHTML = mappedUsers
	}

	function editUser() {
		const id = event.target.getAttribute('data-id')
		console.log('id: ', id)
	}

	getUsers()
</script>